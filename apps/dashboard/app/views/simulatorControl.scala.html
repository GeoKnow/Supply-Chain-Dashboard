@()

<p>
<button onclick="step()">Step</button>

<button id="simulation-run" onclick="run()">Run</button>

<button id="simulation-stop" onclick="stop()" disabled="disabled">Stop</button>
</p>

<div id="slider"></div>

<script>
  var running = false;
  var frequency = 1.0;

  // Initialization
  $(function() {
    $("#slider").slider({
      value: 1,
      min: 0.2,
      max: 4,
      step: 0.4,
      change: function( event, ui ) {
        frequency = 1.0 / ui.value;
        console.log("Frequency changed: " + frequency);
        if(running)
          run()
      }
    });
  });

  // Single step through the simulation
  function step() {
    $.post('simulator/step');
  }

  // Run the simulation
  function run() {
    $.post('simulator/run?frequency=' + frequency, function() {
      running = true;
      $('#simulation-run').button('disable');
      $('#simulation-stop').button('enable');
    });
  }

  // Stop the simulation
  function stop() {
    $.post('simulator/stop',
      function() {
        running = false;
        $('#simulation-run').button('enable');
        $('#simulation-stop').button('disable');
      });
  }

</script>